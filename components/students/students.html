<!DOCTYPE html>
<html>

<head>
    <title>Institutes Page</title>
    <link rel="stylesheet" href="./students.css">
    <link rel="stylesheet" href="../../css/admin_table.css">
    <link rel="stylesheet" href="../../css/message.css">
    
</head>


<body>
    <span id="alert" class="alert">This is an alert!</span>
    <section id="popup"></section>
    <section class="popup">
        <section class="dot"></section>
        <section class="dot"></section>
        <section class="dot"></section>
    </section> 
    <section id="header" class="students">
    <section >
        <button onclick="toggleElement('add-admin')" id="add-admin-button" class="add-button"><img
                src="../../img/134224_add_plus_new_icon.png" alt="plus icon" /> STUDENT APPLICATION</button>
    </section>
    <section class="filter-section">
        <h2>Students Application</h2>
        <span id="alert" class="alert">This is an alert!</span>
        <section class="line"></section>
        <section class="filter">
            <label for="search-input">Search</label>
            <input type="text" id="search-input" placeholder="Search student...">
            <label for="money-range">Amount</label>
            <input type="range" id="money-range" min="0" max="125000" value="50000" oninput="displayValue(this.value)">
            <output id="display-value">50000</output>
            <label for="filter-options">Status</label>
            <select name="filter-options" id="filter-options">
                <option value="All">All</option>
                <option value="Approved">Approved</option>
                <option value="Rejected">Rejected</option>
                <option value="Pending">Pending</option>
                <option value="Documents">Documents</option>
            </select>
        </section>
    </section>
    <section id="students">
        <table>
            <thead>
                <tr>
                    <th scope="col">FirstName</th>
                    <th scope="col">LastName</th>
                    <th scope="col">University</th>
                    <th scope="col">BursaryAmount</th>
                    <th scope="col">status</th>
                  
                </tr>
            </thead>
            <tbody id="results">
                <tr class="table-rows">
                    <td data-label="FirstName">No record was found.</td>
                    <td data-label="LastName"></td>
                    <td data-label="University"></td>
                    <td data-label="BursaryAmount"></td>
                    <td data-label="status" class="approved"></td>
                    <td class="viewButton"></td>
                </tr>
            </tbody>
        </table>
    </section>
    </section>

    <section id="registrationForm">
        <h1>Bursary Application</h1>
        <section class="cardbar">
    
        <!-- <fieldset class="card">
            <legend>Budget</legend>
            <label class="big-number">R1 000 000</label>
        </fieldset>
        <fieldset class="card">
            <legend>Balance</legend>
            <label class="big-number red">R200 000</label>
        </fieldset>
        </section> -->
    
        <form id="applicatonForm">
            <fieldset>
                <legend>Personal Details</legend>
                <label for="firstName">First Name:</label>
                <input type="text" id="firstName" pattern="[a-zA-Z]+" name="firstName" placeholder="e.g. Sipho" required>
    
                <label for="lastName">Last Name:</label>
                <input type="text" id="lastName" name="lastName" pattern="[a-zA-Z]+" placeholder="e.g. Khumalo" required>
    
                <label for="email">Email:</label>
                <input type="email" id="email" name="email" placeholder="e.g. sipho@gmail.com" required>
                
                <label for="IdentityNumber">Identity Number:</label>
                <input type="text" placeholder="e.g. 9908045784081" pattern="[0-9]+" minlength="13" maxlength="13" id="IdentityNumber" name="IdentityNumber" required>
                
                <label for="phoneNumber">Phone Number:</label>
                <input type="text" id="phoneNumber" placeholder="e.g. 0643188744" name="phoneNumber" required>
    
                <label for="race">Race:</label>
                <select class="selectUniversity" id="race"  name="race">
                
                    <option value=2>Black</option>
                    <option value=5>Indian</option>
                    <option value=4>Coloured</option>
                </select>
                <label for="averageMarks">Average Marks:</label>
                <input type="number" id="averageMarks" placeholder="e.g. 65" pattern="[0-9]+" name="averageMarks" min="65" max="100" required>
            </fieldset>
            <fieldset>     
                <legend>Bursary</legend>
                    <label for="bursaryAmount">Bursary Amount:</label>
                    <input type="number" id="bursaryAmount" pattern="[0-9]+" name="bursaryAmount" min="500" max="125000" required>
                    <label for="Motivation">Motivation:</label>
                    <textarea id="motivation" name="motivation" required></textarea>
           </fieldset>
            <fieldset>
            <button id="submit" type="submit">Submit</button>
            <button id="cancel" type="submit">Cancel</button>
            </fieldset>
            
        </form>
    </section>

   
    </section>
 <section id="student-details">
        <section class="details-section">
          <h3>Personal Details</h3>
            <p id="name">Firstname: John Doe</p>
            <p id="lname">lastname: 071 123 4567</p>
            <p >Email: <span id="mail">djdjdj@gmail.com</span></p>
            <p id="phone">Phone Number: 071 123 4567</p>
            <p id="id">Identity Number: 1234567890123</p>
        </section>
        
        <section class="details-section">
          <h3>Bursary Details</h3>
          <p id="universityname">Bursary Type: Full Scholarship</p>
          <p id="bursaryAmountdetails">Amount: $10,000</p>
         
        </section>
        
        <section class="details-section">
          <h3>Status</h3>
          <p id="status-details">Status: Active</p>
     
        </section>
        
        <section class="details-section">
          <h3>Document Upload Link</h3>
          <button id="link">Get Upload Documents Link</button>
          
          <ul id="documents" class="documents">
            <li id="identityDocument"  class="document">
              <i class="fa fa-file document-icon"></i>
              <p>Identity Document</p>
            </li>
            <li id="transcript" class="document">
              <i class="fa fa-file document-icon"></i>
              <p>Transcripts</p>
            </li>
          </ul>
        </section>
    
        <section class="details-section">
            <h3>Actions</h3>
            <button id="approve">Approve</button>
            <button id="reject">Reject</button>
            <button id="sendApplication">Send Application</button>
            <button id="back">Back</button>
        </section>
      </section>


</body>
<script type="module">
    import { fetchStudents, filterStudentsByAmount,hideHodButton,validateForm, addStudent, addHODNewStudent } from './students.js';

    document.addEventListener('DOMContentLoaded', function () {
        fetchStudents();
      
        document.getElementById("filter-options").onchange = (e) => {
            fetchStudents(e.target.value, undefined);
        }
        document.getElementById("search-input").oninput = (e) => {
            fetchStudents(undefined, e.target.value);
        }
        document.getElementById("money-range").oninput = (e) => {
            displayValue(e.target.value);
            filterStudentsByAmount(e.target.value);
        }
        document.getElementById("back").onclick = (e) => {
            e.preventDefault();
            document.getElementById("registrationForm").style.display = "none";
            document.getElementById("header").style.display = "block";
            document.getElementById("student-details").style.display = "none";
            
        }

        //form submission
        document.getElementById("applicatonForm").onsubmit = (e) => {
            e.preventDefault();
            if (validateForm()){
                return;
            }
            addHODNewStudent();
            setTimeout(() => {
                fetchStudents();
            }, 2000);
            document.getElementById("registrationForm").style.display = "none";
            document.getElementById("header").style.display = "block";
            document.getElementById("student-details").style.display = "none";
        }

        document.getElementById("add-admin-button").onclick = (e) => {
            e.preventDefault();
            document.getElementById("registrationForm").style.display = "block";
            document.getElementById("header").style.display = "none";
            document.getElementById("student-details").style.display = "none";
        }
      
    });




</script>
<script>

</script>

</html>